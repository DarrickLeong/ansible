---
- name: Gather instance fact
  hosts: all
  #connection: local
  gather_facts: false
  remote_user: ec2-user
  tasks:
    # - name: print ec2 vars
    #   debug:
    #     msg: "{{ ec2.instances[0].private_dns_name }}"
    - name: Display inventory hostname variables
      debug:
        var: inventory_hostname
      when: inventory_hostname == ec2.instances[0].private_dns_name

    - name: gather hostname from RHEL
      ansible.builtin.command: "hostname"
      register: hostname
      when: inventory_hostname == ec2.instances[0].private_dns_name

    - name: Display hostname
      debug:
        msg: "{{ hostname }}"
